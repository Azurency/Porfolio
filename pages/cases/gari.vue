<template>
    <div>
        <case-header :color="color" next-case="/cases/rfp-platform" prev-case="/cases/dont-break-the-chain">
            <b>G.A.R.I.</b> est un logiciel d√©velopp√© pour les r√©seaux de transport d√©sirant avoir
            <b>une solution conviviale, performante et moderne</b> pour affecter leurs v√©hicules aux services.
        </case-header>
        <case-intro :roles="roles" :technologies="technologies" :annee="annee">
            Pour remplacer leur outil Excel existant, Keolis Orl√©ans m'a demand√© de d√©velopper de A √† Z un logiciel d'affectation de v√©hicules √† des services. J'ai eu carte blanche pour le choix du design et des technologies.
        </case-intro>
        <article class="case" style="visibility: hidden;" v-scroll-reveal="{ viewFactor: 0, useDelay: 'once', delay: 300 }">
            <section class="case__container">
                <h2 class="case__title">√âtude du besoin</h2>
                <p class="case__paragraph">Les entreprises de transport doivent affecter des v√©hicules √† des services (heure de d√©but, une heure de fin, une ligne, un d√©p√¥t et un type de v√©hicule). Par exemple, un service repr√©sente le fait que sur une Ligne 1 un bus de type standard doit √™tre affect√© depuis le d√©p√¥t A √† partir de 7h00 et que ce v√©hicule rentrera √† 17h00.</p>
                <p class="case__paragraph">Ces affectations doivent prendre en compte de multiples contraintes :</p>
                <ul class="case__list">
                    <li class="case__list-item">Faire rouler ou interdire certains v√©hicules sur certains parcours</li>
                    <li class="case__list-item">Affecter les v√©hicules avec flocages marketing en priorit√©</li>
                    <li class="case__list-item">Positionner les v√©hicules qui rentrent √† une heure pr√©cise pour le nettoyage</li>
                    <li class="case__list-item">Prendre en compte les v√©hicules en maintenance</li>
                    <li class="case__list-item">...</li>
                </ul>
            </section>
            <div class="case__img-container">
                <img src="~assets/case-gari-1.jpg" alt="√âcran de gestion des indisponibilit√©s" class="case__img case__img--shadow" width="960px" >
            </div>
            <section class="case__container">
                <p class="case__paragraph">Le logiciel devait donc √™tre en mesure de :</p>
                <ul class="case__list">
                    <li class="case__list-item">R√©aliser une affectation rapidement</li>
                    <li class="case__list-item">Prendre en compte toutes les contraintes avant affectation</li>
                    <li class="case__list-item">Permettre de toujours avoir la main par une modification manuelle simple</li>
                    <li class="case__list-item">G√©rer les indisponibilit√©s et le nettoyage</li>
                </ul>
                <h2 class="case__title">La conception</h2>
                <p class="case__paragraph">J‚Äôai commenc√© ma phase de conception par interroger les diff√©rents acteurs qui allait interagir avec G.A.R.I. pour identifier les besoins et les probl√®mes qu‚Äôils rencontraient et comment trouver la bonne solution.</p>
                <p class="case__paragraph">Par exemple :</p>
                <blockquote>Quels sont les points d‚Äôentr√©es des donn√©es (services) ?</blockquote>
                <blockquote>Quels sont les probl√®mes avec le syst√®me actuel ?</blockquote>
                <blockquote>Est-ce que certaines contraintes sont plus importantes que d‚Äôautres ? Certaines contraintes peuvent-elles √™tre enfreintes ?</blockquote>
            </section>
            <div class="case__colored-block" :style="{ background: block1BackgroundColor, color: block1Color }">
                <section class="case__container">
                    <h2 class="case__title" :style="{ color: block1Color }">Quelques diagrammes</h2>
                    <p class="case__paragraph">Apr√®s cette phrase d‚Äôaudit, j‚Äôai pu commencer la conception avec des diagrammes de cas d‚Äôutilisation, des mod√©lisations MCD et diagrammes de classe UML.</p>
                </section>
                <div class="case__flex">
                    <div class="case__flex-item case__flex-item--grid">
                        <img src="~assets/case-gari-2.jpg" alt="MCD services" class="case__img case__img--shadow" height="300px">
                        <p class="case__legend">MCD des services et des liens avec les autres tables</p>
                    </div>
                    <div class="case__flex-item case__flex-item--grid">
                        <img src="~assets/case-gari-3.jpg" alt="MCD ligne" class="case__img case__img--shadow" height="300px">
                        <p class="case__legend">MCD ligne et groupe de ligne</p>
                    </div>
                </div>
            </div>
            <section class="case__container">
                <h2 class="case__title">Maquette de l'interface</h2>
                <p class="case__paragraph">J‚Äôai aussi dessin√© des maquettes de l‚Äôinterface sur papier.</p>
            </section>
            <div class="case__flex">
                <div class="case__flex-item case__flex-item--grid">
                    <img src="~assets/case-gari-4.jpg" alt="Maquette 1" class="case__img case__img--shadow" height="600px">
                </div>
                <div class="case__flex-item case__flex-item--grid">
                    <img src="~assets/case-gari-5.jpg" alt="Maquette 2" class="case__img case__img--shadow" height="600px">
                </div>
            </div>
            <div class="case__colored-block" :style="{ background: block2BackgroundColor, color: block2Color }">
                <section class="case__container">
                    <h2 class="case__title" :style="{ color: block2Color }">Les choix techniques</h2>
                    <p class="case__paragraph">J‚Äôai choisi de r√©aliser <b>une web-app</b>, accessible sur le r√©seau de l‚Äôentreprise. L‚Äôavantage par rapport √† une application de bureau, en Java par exemple, est que le logiciel n‚Äôa pas besoin d‚Äô√™tre install√© poste par poste par le service informatique. Toute personne connect√©e au r√©seau interne peut acc√©der via une adresse √† entrer dans le navigateur √† l‚Äôapplication.</p>
                    <p class="case__paragraph"><b>C√¥t√© client</b>, on retrouve les technologies classiques du web¬†HTML5, CSS3 et le framework r√©actif Vue.js que j‚Äôai commenc√© √† utiliser progressivement (sans tout r√©√©crire) √† partir de la v1.5.</p>
                    <p class="case__paragraph"><b>C√¥t√© serveur</b>, j‚Äôai opt√© pour un d√©veloppement en Python 3, que ce soit pour la logique serveur ou pour les algorithmes d‚Äôaffectations.<br>Python est un langage que j‚Äôappr√©cie beaucoup et que je trouve √©l√©gant <img src="~assets/emoji/heart-eyes.png" alt="üòç" class="emoji">. J‚Äôai d√©velopp√© sous un environnement virtuel python sur lequel j‚Äôai utilis√© le framework Flask avec l‚ÄôORM SQLAlchemy et MySQL, le tout sur un serveur Linux, Ubuntu 16.06.</p>
                </section>
            </div>
            <section class="case__container">
                <h2 class="case__title">La version 1.0</h2>
                <p class="case__paragraph">C‚Äôest la premi√®re version qui a √©t√© utilis√©e en production pendant un peu moins d‚Äôun an. Elle a diff√©rents modules de gestion :</p>
                <div class="case__flex case__flex--normal-align">
                    <ul class="case__list">
                        <li class="case__list-item">V√©hicules</li>
                        <li class="case__list-item">Coupures</li>
                        <li class="case__list-item">Indisponibilit√©</li>
                        <li class="case__list-item">Affectation</li>
                        <li class="case__list-item">Lignes</li>
                    </ul>
                    <ul class="case__list">
                        <li class="case__list-item">Nettoyage</li>
                        <li class="case__list-item">Contraintes</li>
                        <li class="case__list-item">√âquipements</li>
                        <li class="case__list-item">D√©p√¥ts</li>
                    </ul>
                </div>
                <p class="case__paragraph">L‚Äôaffectation est r√©alis√©e en environ une seconde pour 200 v√©hicules et environ 150 services.</p>
                <h2 class="case__title">Les √©volutions, v1.5</h2>
                <p class="case__paragraph">La v1.0 a √©t√© d√©velopp√©e en √©t√© 2016 et j‚Äôai au d√©but d‚Äô√©t√© 2017 d√©velopp√© une mise √† jour v1.5 pour int√©grer des am√©liorations de l‚Äôexp√©rience utilisateur ainsi que de nouvelles fonctionnalit√©s.</p>
                <p>Parmi les nouveaut√©s :</p>
                <ul class="case__list">
                    <li class="case__list-item">Module feuille de travail pour √©viter la double saisie d‚Äôinformations avec d‚Äôautres applications/feuilles Excel</li>
                    <li class="case__list-item">Module d‚Äôinsertion de services dans la base de donn√©es</li>
                    <li class="case__list-item">R√©solutions des bugs</li>
                    <li class="case__list-item">Nouvelles options dans le nettoyage</li>
                    <li class="case__list-item">Gestion des bus affr√©t√©s √† d‚Äôautres entreprises</li>
                    <li class="case__list-item">Multiples am√©liorations de l‚Äôinterface</li>
                </ul>
            </section>
            <div class="case__flex">
                <div class="case__flex-item">
                    <img src="~assets/case-gari-6.jpg" alt="√âcran v√©hicules" class="case__img case__img--shadow" width="600px">
                    <p class="case__legend">Interface de gestion des v√©hicules avec des onglets et un code couleur</p>
                </div>
                <div class="case__flex-item" style="margin-left:-160px;">
                    <img src="~assets/case-gari-7.jpg" alt="√âcran coupures" class="case__img case__img--shadow" width="450px">
                    <p class="case__legend">√âcran des coupures</p>
                </div>
            </div>
            <div class="case__img-container">
                <img src="~assets/case-gari-8.jpg" alt="√âcran affectation" class="case__img case__img--shadow" width="960px" style="margin-top: 1em;">
                <p class="case__legend">√âcran principal, l'affectation. Les d√©p√¥ts peuvent √™tre diff√©renci√©s avec les couleurs diff√©rentes des lignes, les types de v√©hicules ont tous un code couleur</p>
            </div>
            <section class="case__container" style="margin-top: 3em">
                <h2 class="case__title">Quelques d√©tails</h2>
                <p class="case__paragraph">Depuis la v1.5, les choix propos√©s dans les modals sont plus clairs pour que l'utilisateur ait une id√©e pr√©cise de l'action qu'il va effectuer, plus de "Ok" et "annuler" sans contexte.</p>
            </section>
            <div class="case__img-container">
                <img src="~assets/case-gari-9.jpg" alt="Fenetre modale de confirmation" class="case__img case__img--shadow" width="500px">
                <p class="case__legend">Oui, supprimer ou Non, garder cette indisponibilit√© = un choix clair</p>
            </div>
            <section class="case__container" style="margin-top: 3em">
                <h2 class="case__title">Gestion des tramways, v2.0</h2>
                <p class="case__paragraph">La mise √† jour en version 2.0 a apport√© son lot de nouveaut√©s et surtout la gestion des tramways. Les trams ont de nombreuses sp√©cificit√©s qui rendent leur affectation tr√®s diff√©rente des autres v√©hicules :</p>
                <ul class="case__list">
                    <li class="case__list-item">Un remisage sur lequel ils sont plac√©s les uns derri√®re les autres, on ne peut pas sortir n'importe quel v√©hicule pour l'affecter</li>
                    <li class="case__list-item">Des maintenances kilom√©triques obligatoires qui ne doivent pas tomber en m√™me temps</li>
                    <li class="case__list-item">Des contraintes de nettoyages, √©quipements par p√©riodes, voies sp√©cifiques pour maintenance, etc.</li>
                </ul>
            </section>
            <div class="case__flex">
                <div class="case__flex-item">
                    <img src="~assets/case-gari-11.jpg" alt="Visualisation des visites pr√©ventives" class="case__img case__img--shadow" width="450px">
                    <p class="case__legend">Selection des dates de maintenance souhait√©es</p>
                </div>
                <div class="case__flex-item" style="margin-left:-40px;">
                    <img src="~assets/case-gari-10.jpg" alt="Visualisation du remisage" class="case__img case__img--shadow" width="550px">
                <p class="case__legend">Les trams sur le remisage, avec des codes couleurs pour les r√©serves, indisponibles, etc</p>
                </div>
            </div>
            <section class="case__container">
                <p class="case__paragraph">
                    La probl√©matique des trams est donc d'optimiser les affectations (sur des services plus long ou plus court) pour que les maintenances tombent au moment souhait√©, tout en remisant bien les v√©hicules quand ils rentrent sur le d√©p√¥t le soir.
                </p>
                <p class="case__paragraph">
                    J'ai √©crit les algorithmes d‚Äôaffectation et de remisage des v√©hicules en me reposant sur des th√®ses math√©matiques de chercheurs qui existaient pour les trains que j‚Äôai transpos√©s et appliqu√©s au domaine des trams et des bus.
                </p>
                <h2 class="case__title">Des adaptations, v3.0</h2>
                <p class="case__paragraph">
                    J'ai r√©alis√© fin 2019 une mise √† jour v3.0. Elle avait pour but d'ajouter une affectation kilom√©trique aux v√©hicules, de continuer √† am√©liorer l'exp√©rience utilisateur et d'ajouter une interface avec d'autres logiciels faisant partie du SI typique d'un r√©seau de transport (le SAEIV).
                </p>
            </section>
            <div class="case__flex">
                <div class="case__flex-item case__flex-item--grid">
                    <img src="~assets/case-gari-13.jpg" alt="Introduction de l'affectation" class="case__img case__img--shadow" width="450px">
                    <p class="case__legend">Introduction avec les informations essentielles</p>
                </div>
                <div class="case__flex-item case__flex-item--grid">
                    <img src="~assets/case-gari-14.jpg" alt="Detail des indisponibilit√©s par type de v√©hicule" class="case__img case__img--shadow" width="430px">
                    <p class="case__legend">D√©tail par type de v√©hicule</p>
                </div>
            </div>
            <section class="case__container">
                <p class="case__paragraph">
                    Elle a aussi am√©lior√© diff√©rents aspects :
                </p>
                <div class="case__flex case__flex--normal-align">
                    <ul class="case__list">
                        <li class="case__list-item">Gestion des v√©hicules de rel√®ves et "autres v√©hicules"</li>
                        <li class="case__list-item">Date commune √† toute l'application</li>
                        <li class="case__list-item">Nouveaux param√©trages administrateur : √©ditions des services, menus visibles, etc.</li>
                    </ul>
                    <ul class="case__list">
                        <li class="case__list-item">Ajout et am√©lioration de diff√©rents exports Excel</li>
                        <li class="case__list-item">Services obligatoires/facultatifs</li>
                        <li class="case__list-item">Nombreuses petites am√©liorations (introduction √† l'affectation, d√©tail des indisponibilit√©s, nombre total de v√©hicules, etc.)</li>
                    </ul>
                </div>
            </section>
            <div class="case__flex">
                <div class="case__flex-item">
                    <img src="~assets/case-gari-12.jpg" alt="Page de gestion des services" class="case__img case__img--shadow" width="650px">
                    <p class="case__legend">Modification des services</p>
                </div>
                <div class="case__flex-item" style="margin-left:-100px;">
                    <img src="~assets/case-gari-15.jpg" alt="Personalisation du menu" class="case__img case__img--shadow" width="330px">
                <p class="case__legend">Menu personalisable</p>
                </div>
            </div>
            <section class="case__container" style="margin-top: 3em">
                <h2 class="case__title">Retours utilisateur</h2>
                <p class="case__paragraph">Les retours utilisateurs ont jusque l√† √©t√© tr√®s positifs. L‚Äôoutil est agr√©able √† utiliser, pratique et leur permet de gagner du temps.<br>Les am√©liorations sont bien accueillies au fil des ans et d‚Äôautres modifications sont d√©j√† en train d‚Äô√™tre √©tudi√©es pour une prochaine version.</p>
                <p class="case__paragraph">N'h√©sitez pas √† tester la d√©mo sur 
                    <rounded-button 
                        text="le site de G.A.R.I." 
                        color="#74C4CC" 
                        link="http://gariapp.fr"
                    />
                </p>
            </section>
        </article>
    </div>
</template>

<script>
import Color from 'color'
import { addDynamicCssRule } from 'assets/js/utils'

import CaseHeader from '~/components/case_header'
import CaseIntro from '~/components/case_intro'
import RoundedButton from '~/components/rounded_button.vue'

export default {
    data () {
        return {
            color: 'rgba(165, 230, 237, 1.00)',
            darkenColor: Color('rgba(165, 230, 237, 1.00)').rotate(5).darken(0.45).rgb().string(),
            roles: ['Conception', 'Design', 'D√©veloppement', 'Tests'],
            technologies: ['Python (Flask)', 'Vue.js', 'MySQL', 'HTML/CSS', 'UML/Merise'],
            annee: '2016-2019'
        }
    },
    components: {
        CaseHeader,
        CaseIntro,
        RoundedButton
    },
    computed: {
        block1 () {
            return Color(this.color).rotate(10).rgb()
        },
        block1BackgroundColor () {
            return this.block1.string()
        },
        block1Color () {
            return this.block1.darken(0.55).rgb().string()
        },
        block2 () {
            return Color(this.color).desaturate(0.9).lighten(0.21).rgb()
        },
        block2BackgroundColor () {
            return this.block2.string()
        },
        block2Color () {
            return this.block2.darken(0.7).rgb().string()
        }
    },
    head () {
        return {
            title: 'G.A.R.I.',
            meta: [
                { hid: 'description', name: 'description', content: '√âtude du d√©veloppement de l\'application web G.A.R.I., gari app. Cr√©√©e pour g√©rer l\'affectation de v√©hicules √† des services dans les r√©seaux de transport comme Keolis ou Transdev.' }
            ]
        }
    },
    transition (to, from) {
        if (from && from.name === 'index') {
            return {
                mode: 'out-in',
                css: false,
                enter (el, done) {
                    window.scrollTo(0, 0)
                    const elt = document.querySelector('#js-caseHeader')
                    if (elt) {
                        document.body.removeChild(elt)
                    }
                    done()
                },
                leave (el, done) {
                    done()
                }
            }
        }
        return {
            mode: 'out-in',
            css: false,
            enter (el, done) {
                window.scrollTo(0, 0)
                done()
            },
            leave (el, done) {
                done()
            }
        }
    },
    beforeMount () {
        addDynamicCssRule(`.case__list-item::before{color:${this.darkenColor}}blockquote{border-left-color:${this.color}}`)
    }
}
</script>
